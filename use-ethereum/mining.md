# 挖矿

## 挖矿原理

### 概述

如今，以太坊的挖矿过程与比特币的几乎是一样的。

挖矿过程就是速度的较量过程。挖矿的时候，矿工使用计算机反复迅速地猜一个数学难题的答案，直到有矿工猜到正确答案为止。

更具体来说，矿工会对**区块头元数据**（包括时间戳、软件号和这个区块的交易哈希值）进行哈希函数运算（函数会得到一个由字母和数字组成、固定长度的字符串，即哈希值），其中会影响哈希值结果的**随机值**是唯一的变量。

如果矿工A率先找到满足要求的哈希值，那么矿工A将获得以太币作为奖励，并在全网广播区块，让所有节点进行验证并更新账本。如果矿工B算出正确哈希值，矿工A将停止在当前区块链作运算，并转到在下一个区块上重复此过程。

大约每12到15秒，矿工就会挖出一个区块。如果矿工解决数学难题的速度过快或过慢，算法会自动调整挖矿难度，把出块速度保持在**12秒左右**。

矿工赚取这些以太币是有随机性的，挖矿的收益取决于运气及所投入的算力。

以太坊以**ethash**作为特定工作量证明机制算法。

### 算力/ 哈希率/ Hashrate

算力是计算机**能够完成一个数学程序的速度**，譬如接收任何一组信息，并将其转换成 字母和一定长度的数字的速度就称为算力。在比特币“挖矿”中，对于数学难题的求解需要找到相应的数学解，而对于任意一个给定范围内的Hash 值，其求解只能通过自动生成的随机数，因此**一个挖矿机每秒能做多少次求解过程**就是算力的代表，其单位为Hash/s。

## 如何挖矿？

了解以太坊的挖矿原理后，想试着在激烈的“挖矿竞赛”中抢先挖出属于自己的以太币吗？

挖矿是将以太坊的“去中心化应用程序商店”凝聚在一起的粘合剂，因为挖矿能确保以太坊网络上运行的任何去中心化应用程序都在同样的共识机制前提下进行更改。

矿工们为了赢得以太币，需要利用计算机进行大量的计算，直到其中一个矿工解开这一数字难题。

理论上，任何人都可以用自己的电脑计算这些数字难题，以此来赢得奖励。

随着时间的推移，越来越多的人使用算力更强的硬件，因此主要公链的挖矿往往需要越来越多的算力。

在当今这个时代，使用那些低能耗的挖矿设备难以在“挖矿竞赛”中获得胜利，但对于业余爱好者来说，这仍然是一种可行的消遣方式。

### 选择挖掘硬件

在开始挖矿之前，需要选择专门的计算机硬件来挖矿。

挖矿硬件有四种类型：CPU、GPU、 FPGA和ASIC。与CPU和GPU相比，ASIC是当今挖矿硬件的首选，它能解决非常复杂的算法，而GPU和CPU分别解决图形算法和基于处理器的算法。与FPGA相比，ASIC的性能更好。

#### ASIC挖矿设备

ASIC是专用集成电路\(Application-Specific Integrated Circuit\)的缩写，指应**特定用户要求和特定电子系统**的需要而设计、制造的集成电路。它是一种为尽可能快地执行哈希算法而设计的微芯片，某种挖矿需要的特定算法决定了ASIC的属性。它计算哈希值的速度比性能最佳的CPU还要快十万倍。目前，ASIC由比特大陆\(Bitmain\)和Cannan公司设计。

对于加密货币的生态系统，使用ASIC挖矿设备有利有弊。ASIC在操作上非常经济适用，因为相比于GPU设备，ASIC在处理哈希函数方面相对便宜且更加高效。反过来，这就使得矿工得到更高的利润。但同时，挖矿效率是以牺牲去中心化作为代价的。

如比特币的经验所示，正是由于ASIC设备挖矿效率高，企业家们打起了“歪主意”，通过集结大量算力建立大型挖矿场，进而控制加密货币未来的发展。

🦸♂ 优点：

         ✔ 算力使用少

         ✔由于针对特定币种，所以算力强

         ✔体积更小和更轻便

         ✔获得利润高

🎯 缺点：

         ❗费用高

         ❗专用性强（如以太币ASIC设备只能挖以太币）

         ❗转售价格低

         ❗使用寿命短

         ❗不可升级

#### GPU挖矿设备

GPU是图形处理单元\(Graphics Processing Unit\)的缩写，被称为视频卡。计算能力比不上ASIC，但GPU使用起来更灵活，无需定制。GPU通常用于游戏类电脑中，以保证3D动画和视频的流畅。GPU的挖矿速度比CPU快得多。

🦸♂ 优点：

         ✔擅长进行复杂的计算

         ✔容易获得

         ✔标准硬件

         ✔转售价格高

         ✔可升级

🎯 缺点：

         ❗功率高

         ❗算力比不上ASIC

         ❗整体效率比ASIC更低

         ❗需要大型设备

         ❗开采币种无定制性

#### FPGA设备

FPGA是现场可编程门阵列\(Field Programmable Gate Array\)的简称，顾名思义，FPGA是可现场编程的，而不需要重新送回半导体铸造厂进行重新编程。或者说，FPGA可以根据生产后出现的应用或功能需求进行重新编程。

🦸♂ 优点：

         ✔运算速度优于GPU

         ✔半定制的硬件，通过重新编程可定义其中的单元配置和链接架构，在灵活性上优于ASIC

         ✔生产成本低于ASIC

🎯 缺点：

         ❗FPGA的所有功能均依靠硬件实现，无法实现分支条件跳转等操作。

#### CPU设备

CPU\(中央处理器\)的设计非常适合在不同任务之间快速切换，所以用户在使用各种程序之间不会等待太久。CPU也非常善于遵循如“如果这个，做那个，否则做其他事情”这样的指令来快速执行算法。然而，在能够快速切换任务的特性使得CPU不能很好地进行重复的、大量冗长的数学计算。

🦸♂ 优点：

         ✔只要有电脑，每个人都能用CPU硬件挖矿

         ✔某些加密货币只能使用CPU来挖矿

         ✔使用CPU挖矿就无需购买和投资任何其他硬件，未免是一个挖掘加密货币的好方法

         ✔使用CPU作为GPU挖矿的补充可以为矿工带来一些额外的好处

🎯 缺点：

         ❗对于大多数加密货币来说，使用CPU挖矿是无利可图的

         ❗无法用于对某些加密货币的挖矿

### 安装软件

选择挖矿硬件后，下一步就要安装挖矿软件。首先，矿工需要安装一个客户端以连接网络。

熟悉命令行的程序员可以安装geth客户端，运行用脚本语言Go语言编写的以太坊节点，或者运行任意其中一个客户端。

可以[在这里](https://github.com/ethereum/go-ethereum/releases)下载Geth客户端，根据适当的操作系统指引\(Windows、Mac OS或Linux\)来进行解压并运行。

安装后，节点将连接到以太坊网络，可以与其他节点进行“对话”。除了挖掘以太币之外，Geth客户端还提供了一个接口，用于部署智能合约和使用命令行发送交易。

### 测试

可以在自己的专用网络上挖掘“测试网络版”以太币，以试验智能合约或去中心化应用程序这些需要使用以太币的操作。

在测试网络上挖矿不需要任何高级硬件，只需要一台安装了geth或其他客户端的家用计算机即可。 但是，挖假以太币肯定不会很赚钱。

在这里可以查阅更多[有关如何建立测试网络](https://www.ethereum.org/cli)以及[在测试网上如何进行挖矿](https://www.ethereum.org/ether)的信息。

### 安装挖矿软件

若有兴趣挖掘真以太币，则需要安装挖矿软件。

下载了客户端，且节点已成为网络的一部分后，就可以下载挖矿软件了。

#### [Claymore](https://claymore-dual.github.io/)

Claymore是最高效的以太坊挖矿软件之一，因为它带有以太坊双重矿机，可在不折损算力的基础上挖出类似算法的加密货币。

Claymore以太坊矿机的优点就是可以用于挖基于以太坊之外的其他通证，其中包括Pascal，Decred，Siacoin和Lbry。一般单挖情况下，挖矿费用为1％，如果进行双重挖矿，则费用为2％。

Windows和Linux操作系统支持Claymore运行，对于Windows10系统来说，Claymored是其最佳以太坊矿机之一。

#### [Ethminer](https://github.com/ethereum-mining/ethminer)

顾名思义，Ethminer是专门为以太坊设计的。 Mac，Linux和Windows均支持Ethminer。

基于ETHash算法的所有通证都能用Ethminer进行挖掘，例如ETC\(以太坊经典\)，Musicoin，Pirl，Metaverse，Expanse，Ellaism等币种。

Ethminer的挖矿费用为1％。



安装挖矿软件后，节点将正式为维护以太坊网络安全贡献一份力量。

### 加入矿池

矿工要独立自行挖掘以太币，显然不太可能。

因此，矿工将其算力“汇集”到“矿池”中，以提高他们解决数学难题的速度来赚取更多的以太币。然后，按照每个矿工贡献的算力按比例分配利润。

每个矿池都有可能不会永远存在，而且每个矿池的算力也在不断变化，因此，决定加入哪个矿池需要考虑许多因素。

另外，要记住的一点是，矿池的支付结构不同。

若加入矿池，矿工需要在网站上进行注册，以便连接到矿池并开始采矿。

但是请记住，挖矿世界是变幻莫测。今天使用的工具明年可能已过时，有些矿池可能会消失，取而代之的是新矿池，因此**有必要注意行业变化**。



